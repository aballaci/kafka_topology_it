spring:
  cloud:
    stream:
      function:
        definition: process;customaggregator
      default:
         producer:
          useNativeEncoding: true
         consumer:
          useNativeEncoding: true
      bindings:
#        input:
#          destination: ocr-ready
#          content-type: application/json
#        output:
#          destination: ocr-aggregated
#          content-type: application/json
        process-in-0:
          destination: ocr-ready
          content-type: application/json
        process-out-0:
          destination: ocr-aggregated
          content-type: application/json
        customaggregator-in-0:
          destination: ocr-ready
          content-type: application/json
          group: customaggregator-group
      kafka:
          binder:
           brokers: ${spring.embedded.kafka.brokers}
          streams:
            binder:
              configuration:
                default.key.serde: org.apache.kafka.common.serialization.Serdes$ByteArraySerde
                default.value.serde: com.ballaci.CustomSerdes$OcrReadyEventSerde
              functions.customaggregator.groupId: customaggregator
              functions.process.groupId: proccessor
  kafka:
    consumer:
      properties:
        spring.json.trusted.packages: "*"


    producer:
      properties:
        spring.json.add.type.headers: false
#debug: true

logging:
  level:
    ROOT: ERROR
    org.apache.kafka: ERROR
    com.ballaci: DEBUG