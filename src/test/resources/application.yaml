spring:
  cloud:
    stream:
      function:
        definition: process;aggregated
      default:
         producer:
          useNativeEncoding: true
         consumer:
          useNativeEncoding: true
      bindings:
#        input:
#          destination: ocr-ready
#          content-type: application/json
#        output:
#          destination: ocr-aggregated
#          content-type: application/json
        process-in-0:
          destination: ocr-ready
          content-type: application/json
        process-out-0:
          destination: ocr-aggregated
          content-type: application/json
        aggregated-in-0:
          destination: ocr-aggregated
          content-type: application/json
          group: aggregated-consumer-group
      kafka:
          binder:
           brokers: ${spring.embedded.kafka.brokers}
          streams:
            binder:
              configuration:
                default.key.serde: org.apache.kafka.common.serialization.Serdes$ByteArraySerde
                default.value.serde: com.ballaci.CustomSerdes$OcrReadyEventSerde
              functions.aggregated.groupId: agg-consumer
              functions.process.groupId: proccessor
  kafka:
    consumer:
      properties:
        spring.json.trusted.packages: "*"
#debug: true

logging:
  level:
    ROOT: ERROR
    org.apache.kafka: ERROR
    com.ballaci: DEBUG